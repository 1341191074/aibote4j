# å¸¸è§é—®é¢˜

æœ¬ç« æ”¶é›†äº†ä½¿ç”¨ Aibote4J æ¡†æ¶æ—¶æœ€å¸¸è§çš„é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚

## ğŸ“¦ ç¼–è¯‘é—®é¢˜

### 1. "Unknown class file version" é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
error: Source option 1.8 is no longer supported. Use 21 or later.
```

**åŸå› ï¼š** Java ç‰ˆæœ¬ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥å½“å‰ Java ç‰ˆæœ¬
java -version

# åº”è¯¥è¾“å‡º Java 21 æˆ–æ›´é«˜
# å¦‚æœç‰ˆæœ¬è¿‡ä½ï¼Œå‡çº§ JDK

# éªŒè¯ Maven ä½¿ç”¨çš„ Java ç‰ˆæœ¬
mvn -version

# æ¸…ç†ç¼“å­˜é‡æ–°ç¼–è¯‘
mvn clean compile
```

### 2. "No JDK found" é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
[ERROR] No compiler is provided in this environment
```

**åŸå› ï¼š** Maven ä½¿ç”¨äº† JRE è€Œä¸æ˜¯ JDK

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# è®¾ç½® JAVA_HOME æŒ‡å‘ JDK

# Windows
setx JAVA_HOME "C:\Program Files\Java\jdk-21"

# Linux/macOS
export JAVA_HOME=/usr/libexec/java_home -v 21
# æˆ–ç¼–è¾‘ ~/.bashrc æˆ– ~/.zshrc

# éªŒè¯è®¾ç½®
echo $JAVA_HOME
java -version

# é‡æ–°ç¼–è¯‘
mvn clean compile
```

### 3. "Maven æ‰¾ä¸åˆ°ä¾èµ–" é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
[ERROR] Failed to execute goal on project xxx: Could not resolve dependencies
```

**åŸå› ï¼š** ç½‘ç»œé—®é¢˜æˆ– Maven ä»“åº“é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping repo.maven.apache.org

# æ¸…ç†æœ¬åœ°ç¼“å­˜
mvn clean dependency:purge-local-repository

# é‡æ–°ä¸‹è½½ä¾èµ–
mvn dependency:resolve

# å¦‚æœä»å¤±è´¥ï¼Œæ£€æŸ¥ Maven é…ç½®
cat ~/.m2/settings.xml  # Linux/macOS
type %USERPROFILE%\.m2\settings.xml  # Windows

# ä½¿ç”¨å›½å†…é•œåƒï¼ˆå¦‚éœ€è¦ï¼‰
# ç¼–è¾‘ ~/.m2/settings.xmlï¼Œæ·»åŠ ï¼š
# <mirror>
#   <id>aliyun</id>
#   <mirrorOf>central</mirrorOf>
#   <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
# </mirror>

# é‡æ–°ç¼–è¯‘
mvn clean compile
```

### 4. "å†…å­˜ä¸è¶³" é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
java.lang.OutOfMemoryError: Java heap space
```

**åŸå› ï¼š** JVM å †å†…å­˜åˆ†é…ä¸è¶³

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å¢åŠ  Maven JVM å†…å­˜
export MAVEN_OPTS="-Xmx2048m -Xms1024m"

# æˆ–ä¸´æ—¶è®¾ç½®ï¼ˆå•æ¬¡ç¼–è¯‘ï¼‰
mvn clean compile -DargLine="-Xmx2048m"

# é‡æ–°ç¼–è¯‘
mvn clean compile
```

## ğŸ”Œ è¿æ¥é—®é¢˜

### 1. "è¿æ¥è¢«æ‹’ç»" é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
Connection refused: connect
æˆ–
java.net.ConnectException: Connection refused
```

**åŸå› ï¼š** ç›®æ ‡æœåŠ¡æœªå¯åŠ¨æˆ–åœ°å€/ç«¯å£é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ
netstat -an | findstr 9527  # Windows
netstat -an | grep 9527      # Linux/macOS

# å¦‚æœæœªè¿è¡Œï¼Œå¯åŠ¨æœåŠ¡
cd sdk-server
mvn spring-boot:run

# éªŒè¯è¿æ¥
# 1. æ£€æŸ¥ IP é…ç½®
# 2. æ£€æŸ¥ç«¯å£é…ç½®
# 3. å°è¯• ping
ping 127.0.0.1

# æ£€æŸ¥é˜²ç«å¢™
# Windowsï¼šæ£€æŸ¥ Windows Defender é˜²ç«å¢™
# Linuxï¼šæ£€æŸ¥ iptables æˆ– ufw
```

### 2. "è¿æ¥è¶…æ—¶" é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
java.net.SocketTimeoutException: Connection timed out
æˆ–
Read timed out
```

**åŸå› ï¼š** ç½‘ç»œå»¶è¿Ÿå¤§æˆ–æœåŠ¡å“åº”æ…¢

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// å¢åŠ è¶…æ—¶æ—¶é—´
WinBot bot = BotFactory.builder()
    .withBotType(BotFactory.BotType.WIN)
    .withTimeout(60000)  // 60 ç§’è¶…æ—¶
    .build();

// æˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹
// bot-config.yml:
// communication:
//   responseTimeout: 60000
```

```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping -c 10 127.0.0.1  # Linux/macOS
ping -n 10 127.0.0.1  # Windows

# æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ
tracert 127.0.0.1  # Windows
traceroute 127.0.0.1  # Linux
```

### 3. "è¿œç¨‹åœ°å€æ— æ•ˆ" é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
java.net.UnknownHostException: hostname
æˆ–
getaddrinfo failed
```

**åŸå› ï¼š** ä¸»æœºåæ— æ³•è§£ææˆ– IP åœ°å€é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ä¸»æœºåè§£æ
nslookup hostname         # Windows
dig hostname             # Linux/macOS
ping hostname

# æ£€æŸ¥ IP åœ°å€
# ä½¿ç”¨ ipconfig (Windows) æˆ– ifconfig (Linux)

# ç¡®ä¿ IP å’Œç«¯å£æ­£ç¡®
# bot-config.yml:
# server:
#   ip: "192.168.1.100"  # æ­£ç¡®çš„ IP
#   port: 9527           # æ­£ç¡®çš„ç«¯å£
```

## âš¡ è¿è¡Œæ—¶é”™è¯¯

### 1. "NullPointerException" é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
java.lang.NullPointerException: Cannot invoke method on null object
```

**åŸå› ï¼š** æœªåˆå§‹åŒ–æˆ–è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// ç¡®ä¿è¿æ¥æˆåŠŸ
WinBot bot = BotFactory.builder()
    .withBotType(BotFactory.BotType.WIN)
    .build();

// æ£€æŸ¥è¿æ¥çŠ¶æ€
if (!bot.connect()) {
    throw new RuntimeException("è¿æ¥å¤±è´¥");
}

// ä½¿ç”¨å‰æ£€æŸ¥ bot éç©º
if (bot == null) {
    System.err.println("Bot æœªåˆå§‹åŒ–");
    return;
}

// æ“ä½œå‰æ£€æŸ¥è¿”å›å€¼
String result = bot.getWindowSize();
if (result == null || result.isEmpty()) {
    System.err.println("è·å–çª—å£å¤§å°å¤±è´¥");
    return;
}
```

### 2. "ç±»æœªæ‰¾åˆ°" é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
java.lang.ClassNotFoundException: net.aibote.sdk.WinBot
æˆ–
NoClassDefFoundError
```

**åŸå› ï¼š** ä¾èµ–æœªæ­£ç¡®åŠ è½½æˆ– classpath é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ä¾èµ–
mvn dependency:tree

# æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘
mvn clean compile -U

# ç¡®ä¿ JAR åœ¨ classpath ä¸­
# æ£€æŸ¥ target/classes ç›®å½•

# å¦‚æœä½¿ç”¨ IDEï¼Œé‡æ–°æ„å»ºé¡¹ç›®
# IntelliJ: Build > Rebuild Project
# Eclipse: Project > Clean
# VS Code: é‡æ–°åŠ è½½çª—å£
```

### 3. "å‚æ•°éªŒè¯å¤±è´¥" é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
java.lang.IllegalArgumentException: Invalid parameter
æˆ–
Parameter validation failed
```

**åŸå› ï¼š** ä¼ å…¥çš„å‚æ•°æ— æ•ˆ

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// éªŒè¯å‚æ•°
String xpath = "/hierarchy/android.widget.Button";
if (xpath == null || xpath.isEmpty()) {
    throw new IllegalArgumentException("XPath ä¸èƒ½ä¸ºç©º");
}

// æ£€æŸ¥åæ ‡èŒƒå›´
int x = 500, y = 800;
if (x < 0 || y < 0) {
    throw new IllegalArgumentException("åæ ‡ä¸èƒ½ä¸ºè´Ÿæ•°");
}

// æ£€æŸ¥æ–‡ä»¶è·¯å¾„
String imagePath = "image.png";
File file = new File(imagePath);
if (!file.exists()) {
    throw new FileNotFoundException("å›¾ç‰‡æ–‡ä»¶ä¸å­˜åœ¨: " + imagePath);
}
```

## ğŸš€ æ€§èƒ½é—®é¢˜

### 1. "å†…å­˜æ³„æ¼" ç—‡çŠ¶

**è¡¨ç°ï¼š** ç¨‹åºè¿è¡Œä¸€æ®µæ—¶é—´åå†…å­˜æŒç»­å¢é•¿

**åŸå› ï¼š** æœªåŠæ—¶é‡Šæ”¾èµ„æºæˆ–è¿æ¥

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// ç¡®ä¿ä½¿ç”¨ try-finally æˆ– try-with-resources
try {
    WinBot bot = BotFactory.builder()
        .withBotType(BotFactory.BotType.WIN)
        .build();
    
    if (bot.connect()) {
        // ä½¿ç”¨ bot
        bot.click(500, 600);
    }
} finally {
    // ç¡®ä¿æ–­å¼€è¿æ¥
    if (bot != null) {
        bot.disconnect();
    }
}

// æˆ–ä½¿ç”¨ try-with-resourcesï¼ˆå¦‚æœ WinBot å®ç°äº† AutoCloseableï¼‰
try (WinBot bot = createBot()) {
    bot.connect();
    bot.click(500, 600);
}
```

### 2. "å“åº”ç¼“æ…¢" é—®é¢˜

**è¡¨ç°ï¼š** å‘½ä»¤æ‰§è¡Œç¼“æ…¢ï¼Œè¶…æ—¶é¢‘ç¹

**åŸå› ï¼š** ç½‘ç»œå»¶è¿Ÿã€æœåŠ¡å™¨è´Ÿè½½é«˜ã€æˆ–ç®—æ³•æ•ˆç‡ä½

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ
ping -c 100 127.0.0.1  # Linux/macOS

# æ£€æŸ¥ç³»ç»Ÿèµ„æº
top  # Linux
taskmgr  # Windows
Activity Monitor  # macOS

# å¢åŠ è¶…æ—¶æ—¶é—´
export MAVEN_OPTS="-Xmx2048m"

# ä½¿ç”¨è¿æ¥æ± ï¼ˆå¦‚æ”¯æŒï¼‰
ConnectionPoolManager.getInstance().setPoolSize(20);
```

### 3. "CPU å ç”¨ç‡é«˜" é—®é¢˜

**è¡¨ç°ï¼š** æŸä¸ªè¿›ç¨‹å ç”¨ CPU è¿‡é«˜

**åŸå› ï¼š** æ­»å¾ªç¯ã€è½®è¯¢è¿‡é¢‘ã€æˆ–ç®—æ³•ä¸ä¼˜åŒ–

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// é¿å…æ­»å¾ªç¯
while (true) {
    // âŒ ä¸è¦è¿™æ ·åš
    // bot.click(x, y);
}

// æ·»åŠ å»¶è¿Ÿ
Thread.sleep(100);  // æ¯æ¬¡æ“ä½œé—´éš” 100ms

// æˆ–ä½¿ç”¨è®¡æ•°å™¨
int maxRetries = 10;
for (int i = 0; i < maxRetries; i++) {
    if (bot.findImage("target.png") != null) {
        break;
    }
    Thread.sleep(500);
}
```

## â“ ä¸€èˆ¬é—®é¢˜

### Q1: å¦‚ä½•è°ƒè¯•åº”ç”¨ï¼Ÿ

**ç­”ï¼š** ä½¿ç”¨ IDE è°ƒè¯•åŠŸèƒ½æˆ–æ·»åŠ æ—¥å¿—

```java
// æ–¹æ³• 1ï¼šä½¿ç”¨ IDE è°ƒè¯•
// IntelliJ: Run > Debug
// Eclipse: Debug As > Java Application

// æ–¹æ³• 2ï¼šæ·»åŠ æ—¥å¿—
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

Logger logger = LoggerFactory.getLogger(MyClass.class);
logger.debug("è°ƒè¯•ä¿¡æ¯: {}", variable);
logger.error("é”™è¯¯ä¿¡æ¯", exception);
```

### Q2: å¦‚ä½•å¤„ç†å¤šä¸ªè®¾å¤‡ï¼Ÿ

**ç­”ï¼š** åˆ›å»ºå¤šä¸ª bot å®ä¾‹å¹¶ç®¡ç†è¿æ¥

```java
// åˆ›å»ºå¤šä¸ª bot
WinBot bot1 = BotFactory.builder()
    .withBotType(BotFactory.BotType.WIN)
    .withIP("192.168.1.100")
    .build();

WinBot bot2 = BotFactory.builder()
    .withBotType(BotFactory.BotType.WIN)
    .withIP("192.168.1.101")
    .build();

// è¿æ¥å¹¶ä½¿ç”¨
if (bot1.connect() && bot2.connect()) {
    bot1.click(500, 600);
    bot2.click(600, 700);
    
    bot1.disconnect();
    bot2.disconnect();
}
```

### Q3: å¦‚ä½•æé«˜å›¾åƒè¯†åˆ«å‡†ç¡®ç‡ï¼Ÿ

**ç­”ï¼š** è°ƒæ•´å‚æ•°å’Œå›¾ç‰‡è´¨é‡

```java
// è°ƒæ•´ç›¸ä¼¼åº¦é˜ˆå€¼
Point point = bot.findImage("target.png", 0.95f);  // 95% ç›¸ä¼¼åº¦

// ä½¿ç”¨æ›´å¥½è´¨é‡çš„å›¾ç‰‡
bot.takeScreenshot("screenshot.png");

// æŒ‡å®šæœç´¢åŒºåŸŸ
Region region = new Region(100, 100, 500, 500);
point = bot.findImage("target.png", 0.9f, region);
```

### Q4: å¦‚ä½•å¤„ç†éšæœºå‡ºç°çš„é”™è¯¯ï¼Ÿ

**ç­”ï¼š** å®ç°é‡è¯•æœºåˆ¶

```java
// é‡è¯•æœºåˆ¶
int maxAttempts = 3;
int attempt = 0;
boolean success = false;

while (attempt < maxAttempts && !success) {
    try {
        bot.click(500, 600);
        success = true;
    } catch (Exception e) {
        attempt++;
        if (attempt >= maxAttempts) {
            throw e;
        }
        Thread.sleep(1000 * attempt);  // æŒ‡æ•°é€€é¿
    }
}
```

### Q5: å¦‚ä½•ä¼˜åŒ– OCR è¯†åˆ«æ€§èƒ½ï¼Ÿ

**ç­”ï¼š** è°ƒæ•´è¯†åˆ«å‚æ•°å’ŒåŒºåŸŸ

```java
// é™åˆ¶ OCR è¯†åˆ«åŒºåŸŸ
Region region = new Region(100, 100, 800, 600);
List<OCRResult> results = bot.ocrByHwnd(hwnd, region, 0, 0, 0, Mode.FOREGROUND);

// è°ƒæ•´äºŒå€¼åŒ–å‚æ•°
List<OCRResult> results = bot.ocrByHwnd(hwnd, region, 1, 127, 255, Mode.FOREGROUND);
```